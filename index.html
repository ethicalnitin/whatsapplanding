<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dexter Luxuries</title>
    <script src="https://cdn.tailwindcss.com"></script> <!-- Adding Tailwind CSS -->
    
    <style>
        /* Custom CSS for the moving announcement bar */
        .announcement-wrapper {
            overflow: hidden;
            white-space: nowrap;
            background-color: white;
        }

        .announcement {
            display: inline-block;
            animation: scroll 12s linear infinite;
        }

        /* Faster for mobile to start appearing immediately */
        @media (max-width: 640px) {
            .announcement {
                animation: scroll 10s linear infinite;
            }
        }

        @keyframes scroll {
            0% {
                transform: translateX(10%);
            }
            100% {
                transform: translateX(-100%);
            }
        }

        /* Styles for the modal */
        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            z-index: 1000;
            width: 90%;
            max-width: 400px;
            text-align: center;
            display: none;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }
    </style>

    <!-- Facebook Pixel Code -->
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '1055377212772927');  // Replace with your actual Pixel ID
      fbq('track', 'PageView');
    </script>
    <noscript>
      <img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=1055377212772927&ev=PageView&noscript=1"/>  <!-- Replace YOUR_PIXEL_ID -->
    </noscript>
</head>
<body class="bg-gray-100">
    <!-- Announcement Bar -->
    <div class="announcement-wrapper py-2 border-b-2">
        <div class="announcement text-black text-xs sm:text-sm">
            Over 2300+ trusted clients. 100% Customer Satisfaction! Since 2022.✅&nbsp;&nbsp;&nbsp;&nbsp; 
            Over 2300+ trusted clients. 100% Customer Satisfaction! Since 2022.✅&nbsp;&nbsp;&nbsp;&nbsp; 
            Over 2300+ trusted clients. 100% Customer Satisfaction! Since 2022.✅&nbsp;&nbsp;&nbsp;&nbsp; 
            Over 2300+ trusted clients. 100% Customer Satisfaction! Since 2022.✅&nbsp;&nbsp;&nbsp;&nbsp;
        </div>
    </div>

<nav class="w-full bg-white py-3 px-6 shadow-md flex justify-between items-center">
        <div class="flex items-center">
            <img src="lgo.jpeg" alt="Dexter Luxuries Logo" class="w-8 h-8 sm:w-10 md:w-12 rounded-full mr-2">
            <h1 class="text-sm sm:text-base md:text-lg font-bold text-black uppercase">Dexter Luxuries</h1>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="flex flex-col items-center justify-center min-h-screen">
        <!-- Verified Profile Section -->
        <div class="text-center mb-6 mt-6">
            <img src="tele.jpg" alt="Verified Profile" class="w-full h-full sm:w-auto sm:h-auto rounded-sm mb-6">
            <p class="text-red-600 font-bold">Warning: Only deal with our official verified account!</p>
        </div>



        <!-- Section Above the Button -->
        <div class="text-center mb-6">
            <p class="text-lg font-semibold">Item Description: TradingView Premium Plan</p>
            <p class="text-lg">Author: Dexter Luxuries</p>
            <p class="text-lg">Start Date: 14 September 2024</p>
            <p class="text-lg font-semibold">Plans: 3/6/12</p>
             <p class="text-lg ">For proofs, vouches , customer reviews..Click Below for more info.</p>
        </div>

        <!-- Get TradingView Premium Button -->
        <button
            id="checkoutButton"
            onclick="trackCheckout();"
            class="bg-red-500 text-white py-3 px-8 rounded-lg hover:bg-red-600 transition duration-300 shadow-md text-lg font-bold">
            Get your TradingView Premium
        </button>
    </div>

    <!-- Countdown Modal -->
    <div id="modalOverlay" class="overlay"></div>
    <div id="countdownModal" class="modal">
        <p id="countdownText">You will be redirected to WhatsApp in 4 seconds...</p>
    </div>

    <script>
      function trackCheckout() {
        const button = document.getElementById('checkoutButton');
        button.innerText = 'Processing...'; // Show "Processing..." text
        button.disabled = true; // Disable the button to prevent multiple clicks

        // Show the countdown modal
        const modal = document.getElementById('countdownModal');
        const overlay = document.getElementById('modalOverlay');
        const countdownText = document.getElementById('countdownText');
        let countdown = 4;

        modal.style.display = 'block';
        overlay.style.display = 'block';

        // Countdown logic
        const interval = setInterval(() => {
            countdownText.innerText = `You will be redirected to WhatsApp in ${countdown} seconds...✅`;
            countdown--;

            if (countdown < 0) {
                clearInterval(interval);
                // Pre-typed message
                const preTypedMessage = "I need more info on TradingView";
                
                // Redirect to WhatsApp with the pre-typed message
                window.location.href = `https://wa.me/+919557338330?text=${encodeURIComponent(preTypedMessage)}`;
            }
        }, 1000);

        // Browser-side tracking (Pixel)
        fbq('track', 'InitiateCheckout', {
            content_name: 'TradingView Premium Plan',
            content_category: 'Software Subscription',
            value: 199.00,
            currency: 'INR',
            content_ids: ['tv-premium-123'],
            content_type: 'product'
        });

        // Server-side tracking (CAPI) - Trigger backend to send event via CAPI
        fetch('https://backend1-ztvf.onrender.com/track-event', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                event_name: 'InitiateCheckout',
                event_time: Math.floor(Date.now() / 1000),
                event_id: 'tv-premium-checkout',
                custom_data: {
                    value: '199.00',
                    currency: 'INR',
                    content_name: 'TradingView Premium Plan',
                    content_category: 'Software Subscription',
                    content_ids: ['tv-premium-123']
                },
                user_data: {
                    email: 'user@example.com',  // Replace with real user data if available
                    phone_number: '919557338330',
                    zip: '12345'
                },
                event_source_url: window.location.href,
                action_source: 'website'
            })
        })
        .then(response => response.json())
        .then(data => {
            console.log("Tracking successful");
        })
        .catch(error => {
            console.error('Error tracking event:', error);
        });
      }
    </script>
</body>
</html>
